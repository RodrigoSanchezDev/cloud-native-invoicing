#!/bin/bash

echo "üîç VERIFICACI√ìN API GATEWAY"
echo "=========================="
echo ""

# Informaci√≥n actual
echo "üìã Informaci√≥n actual:"
echo "API Gateway ID: 5u6zchoeog"
echo "Region: us-east-1"
echo "Stage: DEV"
echo "URL: http://5u6zchoeog.execute-api.us-east-1.amazonaws.com/DEV"
echo ""

echo "‚ö†Ô∏è  PROBLEMAS DETECTADOS:"
echo "========================"
echo "‚ùå API Gateway no responde (Connection refused)"
echo "‚ùå Puerto 80 inaccesible"
echo "‚ùå M√∫ltiples IPs fallan: 52.44.91.73, 3.210.220.211"
echo ""

echo "üîß VERIFICACIONES NECESARIAS EN AWS CONSOLE:"
echo "============================================"
echo "1. AWS Console ‚Üí API Gateway"
echo "2. Buscar API con ID: 5u6zchoeog"
echo "3. Verificar que existe y est√° activo"
echo "4. Verificar que stage DEV est√° desplegado"
echo "5. Verificar URL completa en el dashboard"
echo "6. Verificar integraciones ‚Üí Target debe ser tu EC2"
echo ""

echo "üéØ POSIBLES SOLUCIONES:"
echo "======================"
echo "A) Re-deploy del API Gateway stage DEV"
echo "B) Verificar/corregir URL del API Gateway"
echo "C) Verificar integraciones con backend"
echo "D) Revisar Security Groups/Networking"
echo ""

echo "‚úÖ TU BACKEND FUNCIONA PERFECTAMENTE:"
echo "===================================="
echo "- JWT validation: ‚úÖ"
echo "- Role extraction: ‚úÖ Admin ‚Üí ROLE_ADMIN"  
echo "- Endpoints: ‚úÖ GET/POST responden HTTP 200"
echo "- CORS configurado: ‚úÖ"
echo ""

echo "üîÑ SIGUIENTE PASO:"
echo "=================="
echo "Ve a AWS Console y verifica la configuraci√≥n del API Gateway"
echo "Si necesitas crear uno nuevo, av√≠same y te ayudo"
